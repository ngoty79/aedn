<!DOCTYPE html>
<html xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      xmlns:th="http://www.thymeleaf.org"
      layout:decorate="'siteadmin/layout/common_layout'">
<head>
    <link href="/assets/templates/admin/apps/css/inbox.min.css" rel="stylesheet" type="text/css" />
    <link href="/assets/vendors/bootstrap.table/1.9.1/bootstrap-table.min.css" rel="stylesheet" type="text/css" />
    <link href="/assets/vendors/jquery.loadmask/jquery.loadmask.css" rel="stylesheet" type="text/css" />
</head>
<body>

<!-- BEGIN CONTENT -->
<div layout:fragment="page-content" class="page-content-wrapper">
    <!-- BEGIN CONTENT BODY -->
    <div class="page-content" id="container-salary" th:data-cost-yn="${user.costYn}">
        <div class="inbox">
            <div class="row">
                <div class="col-md-12" id="container-userIndex-contents">
                    <div class="inbox-body" id="container-userIndex-info">
                        <div class="inbox-content">
                            <div class="portlet-body">
                                <div class="tabbable-line">
                                    <ul class="nav nav-tabs ">
                                        <li class="active">
                                            <a href="#tab_salary_cost" data-toggle="tab" aria-expanded="true">Quản Lí Lương Hàng Tháng</a>
                                        </li>
                                        <li class="">
                                            <a href="#tab_salary_management" data-toggle="tab" aria-expanded="false">Bảng Lương Nhân Viên</a>
                                        </li>
                                    </ul>
                                    <div class="tab-content">
                                        <div class="tab-pane active" id="tab_salary_cost">
                                            <div class="row">
                                                <table class="table table-fixed table-list-header">
                                                    <tbody>
                                                    <tr class="table-header-title">
                                                        <td class="p-left p-right">
                                                            <label class="control-label col-md-2" style="width: 90px;margin-top:10px;">Tìm kiếm</label>
                                                            <div class="col-lg-3 col-md-4 col-sm-4 col-xs-6 input-group">
                                                                <input name="searchText" type="text" class="form-control text-search">
                                                                <span class="input-group-addon btn-search">
                                                                    <i class="fa fa-search"></i>
                                                                </span>
                                                            </div>
                                                        </td>
                                                    </tr>
                                                    </tbody>
                                                </table>
                                                <div class="row" style="margin-top: 10px; margin-bottom: 10px; padding-left: 15px; padding-right: 15px;">
                                                    <button type="button" class="btn btn-sm btn-circle btn-outline green btn-delete"><i class="glyphicon glyphicon-remove"></i> Xóa Dữ Liệu</button>
                                                    <button type="button" class="btn btn-sm btn-circle btn-outline green pull-right btn-add"><i class="fa fa-plus"></i> Tạo mới</button>
                                                </div>
                                                <table class="table-salary-detail"></table>
                                            </div>

                                        </div>
                                        <div class="tab-pane" id="tab_salary_management">
                                            <div class="row">
                                                <table class="table table-fixed table-list-header">
                                                    <tbody>
                                                    <tr class="table-header-title">
                                                        <td class="p-left p-right">
                                                            <label class="control-label col-md-2" style="width: 90px;margin-top:10px;">Tìm kiếm</label>
                                                            <div class="col-lg-3 col-md-4 col-sm-4 col-xs-6 input-group">
                                                                <input name="searchText" type="text" class="form-control text-search">
                                                                <span class="glyphicon glyphicon-remove search-clear hide"></span>
                                                                <span class="input-group-addon btn-search">
                                                                    <i class="fa fa-search"></i>
                                                                </span>
                                                            </div>
                                                        </td>
                                                    </tr>
                                                    </tbody>
                                                </table>
                                            </div>
                                            <div class="row" style="margin-top: 10px; margin-bottom: 10px; padding-left: 15px; padding-right: 15px;">
                                                <button type="button" class="btn btn-sm btn-circle btn-outline green btn-delete"><i class="glyphicon glyphicon-remove"></i> Xóa Dữ Liệu</button>
                                                <button type="button" class="btn btn-sm btn-circle btn-outline green pull-right btn-add"><i class="fa fa-plus"></i> Tạo mới</button>
                                            </div>
                                            <table class="table-salary-manage"></table>

                                        </div>
                                    </div>
                                </div>

                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="modal" id="modal-create-salary-mst">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header bg-green bg-font-green">
                        <button type="button" class="close" data-dismiss="modal" aria-hidden="true"></button>
                        <h4 class="modal-title" style="text-align: left;">Tạo/Chỉnh Lương Nhân Viên</h4>
                    </div>
                    <div class="modal-body">
                        <form class="form-horizontal">
                            <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}"/>
                            <input type="hidden" class="form-control" name="salaryMasterNo"/>
                            <div class="change-password-group">
                                <div class="control-group">
                                    <div class="row form-group">
                                        <label class="control-label col-md-3">Chọn nhân viên</label>
                                        <div class="col-md-4">
                                            <select class="form-control" name="userNo">

                                            </select>
                                        </div>
                                    </div>
                                </div>
                                <div class="control-group">
                                    <div class="row form-group">
                                        <label class="control-label col-md-3">Lương cơ bản</label>
                                        <div class="col-md-4">
                                            <input class="form-control currency" name="salary"/>
                                        </div>
                                    </div>
                                </div>
                                <div class="control-group">
                                    <div class="row form-group">
                                        <label class="control-label col-md-3">Phụ cấp</label>
                                        <div class="col-md-4">
                                            <input class="form-control currency" name="allowance"/>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </form>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn green" id="btn-save-salary-mst">Tạo/Chỉnh Sửa</button>
                        <button type="button" class="btn btn-outline green" data-dismiss="modal" aria-hidden="true">Hủy</button>
                    </div>
                </div>
            </div>
        </div>

        <div class="modal" id="modal-create-salary-detail">
            <div class="modal-dialog modal-lg">
                <div class="modal-content">
                    <div class="modal-header bg-green bg-font-green">
                        <button type="button" class="close" data-dismiss="modal" aria-hidden="true"></button>
                        <h4 class="modal-title" style="text-align: left;">Tạo/Chỉnh Bảng Lương Tháng</h4>
                    </div>
                    <div class="modal-body">
                        <form class="form-horizontal">
                            <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}"/>
                            <input type="hidden" class="form-control" name="salaryDetailNo"/>
                            <div class="change-password-group">
                                <div class="control-group">
                                    <div class="row form-group">
                                        <label class="control-label col-md-3">Chọn nhân viên</label>
                                        <div class="col-md-3">
                                            <select class="form-control" name="userNo"></select>
                                        </div>
                                    </div>
                                </div>
                                <div class="control-group">
                                    <div class="row form-group">
                                        <label class="control-label col-md-3">Chọn tháng</label>
                                        <div class="col-md-8">
                                            <div class="col-md-12 form-inline">
                                                <div class="form-group">
                                                    <select class="form-control" name="month">
                                                        <option value="">Tháng</option>
                                                        <option th:each="month : ${#numbers.sequence( 1, 12)}"
                                                                th:value="${month<10}? '0'+ ${month}: ${month}"
                                                                th:text="${month<10}? '0'+ ${month}: ${month}"
                                                                th:selected="${currentMonth == month}? 'selected'"></option>
                                                    </select>
                                                    <select class="form-control" name="year">
                                                        <option value="">Năm</option>
                                                        <option th:each="year : ${#numbers.sequence( #dates.year(#dates.createNow()) - 2, #dates.year(#dates.createNow()) )}"
                                                                th:value="${year}" th:text="${year}"
                                                                th:selected="${currentYear == year}? 'selected'"></option>
                                                    </select>
                                                    <input type="hidden" name="monthYear"/>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="control-group">
                                    <div class="row form-group">
                                        <label class="control-label col-md-3">Số HĐ tạo mới</label>
                                        <label class="control-label col-md-8 text-align-left">
                                            <label class="col-md-4 text-align-left" style="padding-left: 0px;">Hồ sơ mới: <span id="new-loan-count"></span></label>
                                            <label class="col-md-4 text-align-left" style="padding-left: 0px;">Tái cấp: <span id="renew-loan-count"></span></label>
                                        </label>
                                    </div>
                                </div>
                                <div class="control-group">
                                    <div class="row form-group">
                                        <label class="control-label col-md-3">Lương cơ bản</label>
                                        <div class="col-md-3">
                                            <input class="form-control currency" name="salary"/>
                                        </div>
                                        <label class="control-label col-md-2">Phụ cấp</label>
                                        <div class="col-md-3">
                                            <input class="form-control currency" name="allowance"/>
                                        </div>
                                    </div>
                                </div>
                                <div class="control-group" >
                                    <div class="row form-group">
                                        <label class="control-label col-md-3">Phụ cấp theo danh thu</label>
                                        <div class="col-md-3">
                                            <input class="form-control currency" name="extraCost"/>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </form>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn green" id="btn-save-salary-detail">Tạo/Chỉnh Sửa</button>
                        <button type="button" class="btn btn-outline green" data-dismiss="modal" aria-hidden="true">Hủy</button>
                    </div>
                </div>
            </div>
        </div>

        <div class="modal" id="modal-approve-salary">
            <div class="modal-dialog modal-md">
                <div class="modal-content">
                    <div class="modal-header bg-green bg-font-green">
                        <button type="button" class="close" data-dismiss="modal" aria-hidden="true"></button>
                        <h4 class="modal-title" style="text-align: left;">Duyệt Lương Tháng</h4>
                    </div>
                    <div class="modal-body">
                        <form class="form-horizontal">
                            <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}"/>
                            <div id="form-content"></div>
                        </form>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn green" id="btn-approve-salary">Duyệt</button>
                        <button type="button" class="btn btn-outline green" data-dismiss="modal" aria-hidden="true">Hủy</button>
                    </div>
                </div>
            </div>
        </div>

<script type="text/html" id="tmplSalaryDetail">
    <input type="hidden" class="form-control" name="salaryDetailNo" value="${salaryDetailNo}"/>
    <div class="change-password-group">
        <div class="control-group">
            <div class="row form-group">
                <label class="control-label col-md-4">Nhân viên</label>
                <label class="control-label col-md-4 ">${userName}</label>
            </div>
        </div>
        <div class="control-group">
            <div class="row form-group">
                <label class="control-label col-md-4">Lương tháng</label>
                <label class="control-label col-md-4">${month}/${year}</label>
            </div>
        </div>
        <div class="control-group">
            <div class="row form-group">
                <label class="control-label col-md-4">Lương cơ bản</label>
                <label class="control-label col-md-4">${salaryFormat}</label>
            </div>
        </div>
        <div class="control-group">
            <div class="row form-group">
                <label class="control-label col-md-4">Phụ cấp</label>
                <label class="control-label col-md-4">${allowanceFormat}</label>
            </div>
        </div>
        <div class="control-group">
            <div class="row form-group">
                <label class="control-label col-md-4">Phụ cấp theo danh thu</label>
                <label class="control-label col-md-4">${extraCostFormat}</label>
            </div>
        </div>
        <div class="control-group" style="border-top: 1px solid #cac5c5; padding-top: 8px;">
            <div class="row form-group">
                <label class="control-label col-md-4">Tổng Lương</label>
                <label class="control-label col-md-4">${totalFormat}</label>
            </div>
        </div>
    </div>
</script>

    </div>
    <!-- END CONTENT BODY -->
</div>
<!-- END CONTENT -->

<div style="display: none;" layout:fragment="page-scripts">
    <script src="/assets/vendors/bootstrap.table/1.9.1/bootstrap-table.min.js" type="text/javascript"></script>
    <script src="/assets/vendors/bootstrap.table/1.9.1/locale/bootstrap-table-vi-VN.js" type="text/javascript"></script>
    <script src="/assets/vendors/icheck/icheck.min.js" type="text/javascript"></script>
    <script src="/assets/vendors/jquery.tmpl/1.4.2/jquery.tmpl.min.js" type="text/javascript"></script>
    <script src="/assets/applications/siteadmin/scripts/cost/salaryMaster.js" type="text/javascript"></script>
    <script src="/assets/applications/siteadmin/scripts/cost/salaryDetail.js" type="text/javascript"></script>
</div>
</body>
</html>